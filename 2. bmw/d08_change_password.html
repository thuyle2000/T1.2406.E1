<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>change-password</title>
    <link rel="stylesheet" href="css/form.css">
</head>

<body>
    <div>
        <h2>Change Your Password</h2>
        <hr>

        <!-- tao mau bieu dang nhap -->
        <form action="d04_animation.html" method="get" onsubmit="return ThayDoiPW(event)">


            <div class="input">
                <label for="">old password</label>
                <input type="password" name="n_pass1" id="old_pwd" value="123" required>
            </div>

            <div class="input">
                <label for="">new password</label>
                <input type="password" name="n_pass2" id="new_pwd_1" value="123" required>
            </div>

            <div class="input">
                <label for="">new password confirm</label>
                <input type="password" name="n_pass3" id="new_pwd_2" value="123" required>
            </div>


            <div class="input">
                <input type="submit" value="dong y">
                <input type="reset" value="huy">
            </div>
        </form>
    </div>
</body>

<script>
    const ThayDoiPW = (event) => {
        const old_pwd = document.getElementById("old_pwd").value.trim();
        const new_pwd_1 = document.getElementById("new_pwd_1").value.trim();
        const new_pwd_2 = document.getElementById("new_pwd_2").value.trim();


        const l_pwd = localStorage.getItem("pwd");

        if (old_pwd == l_pwd) {
            if (new_pwd_1 == new_pwd_2) {
                alert("Thay doi mat ma thanh cong !");

                //luu mat ma moi voi bien localStorage
                localStorage.setItem("pwd", new_pwd_1);
                return true;
            }
            else {
                alert("Loi: Mat ma moi khong giong mat ma xac nhan !");
                document.getElementById("new_pwd_1").focus();
                return false;
            }
        } else {
            alert("Loi: Mat ma cu ko chinh xac !");
            document.getElementById("old_pwd").focus();
            return false;
        }

        
    }
</script>

</html>